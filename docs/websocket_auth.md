# Websocket Authentication

Websockets are authenticated through a HMACSHA256-signed JWT. The signature uses the node's token (as generated by the panel and seen in wings' configuration file) as a key.  

The payload should contain the following claims:

- Registered `iat`, `nbf`, `exp`, `iss` and `aud` claims.
- A `permissions` string array.
- A `user_uuid` and a `user_id`
- A `server_uuid`.

## Obtention

The client obtains the JWT from the panel using cookie auth. It then uses it to authenticate the websocket.

## Permissions

The `permissions` array in the payload restricts the actions a client may perform. The following permissions are available:

### `websocket.connect`

The client is authorized to connect to the websocket.

### `control.start`

The client is authorized to start the server (send a `set state` event with the `"start"` argument).

### `control.stop`

The client is authorized to stop the server (send a `set state` event with the `"stop"` argument).

### `control.restart`

The client is authorized to restart the server (send a `set state` event with the `"restart"` argument).

### `control.console`

The client is authorized to request console output (sending a `send logs` event).

### `admin.websocket.errors`

The client is a Pterodactyl administrator and shall receive precise error events.

### `admin.websocket.install`

The client is a Pterodactyl administrator and may receive server installation logs.

### `admin.websocket.transfer`

The client is a Pterodactyl administrator. Specifics of this permission are unknown.

### `backup.read`

Specifics of this permission are unknown.

### `*`

The client posseses all non-administrator permissions.
